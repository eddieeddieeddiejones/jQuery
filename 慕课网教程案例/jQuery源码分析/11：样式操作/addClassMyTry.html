
<!doctype html>
<html>
<head>
	<meta http-equiv="Content-type" content="text/html; charset=utf-8"/>

	 <style>
		  .test { margin: 4px; font-size:16px; font-weight:bolder; }
		  .blue { color:blue; }
		  .under { text-decoration:underline; }
		  .highlight { background:yellow; }
	 </style>
     <!-- <script src="http://code.jquery.com/jquery-latest.js"></script> -->
	 <script src="../jquery-1.11.2.js"></script>
	<title></title>
</head>
<body>

<p class="under">Goodbye</p>

<button id="addClass">模拟jQuery的addClass("blue highlight under")方法</button>
<button id="removeClass">模拟jQuery的removeClass("blue highlight under")方法</button>

<script type="text/javascript">
	
	var p = $("p")[0];

    ///////////
    //增加多个样式 //
    ///////////
    $("#addClass").click(function(){
         addClass(p, "blue highlight under")
    })


    $("#removeClass").click(function(){
         removeClass(p, "blue highlight under")
    })




    function addClass(elem,value){
        var classes,
        clazz,
        cur,
        j,
        finalValue;
        classes = (value || "").match(/\S+/g) || []
        // 获取元素本身的类名
        cur = elem.nodeType === 1 && elem.className ?
            (" " + elem.className + " ").replace(/\n\f\t\r/g," "):
            " "
        if(cur){
            j = 0;
            while(clazz =classes[j++]){
                // 本来就有这个类名就不要再添加了
                if(cur.indexOf(" " + clazz+" ")<0){
                    cur += clazz + " "
                }
            }
        }
        finalValue = jQuery.trim(cur)
        if(elem.className !== finalValue){
            elem.className = finalValue
        }
    }


    function removeClass(elem,value){
        var classes,
        clazz,
        cur,
        j,
        finalValue;
        classes = (value || "").match(/\S+/g) || []
        // 获取元素本身的类名
        cur = elem.nodeType === 1 && elem.className ?
            (" " + elem.className + " ").replace(/\n\f\t\r/g," "):
            " "
        if(cur){
            j = 0;
            while(clazz =classes[j++]){
                // 本来就有这个类名就不要再添加了
                if(cur.indexOf(" " + clazz+" ") >= 0){
                    // 替换字符串
                    cur = cur.replace(" " + clazz+" "," ")
                }
            }
        }
        finalValue = jQuery.trim(cur)
        if(elem.className !== finalValue){
            elem.className = finalValue
        }
    }
    



    


</script>
</body>
</html>