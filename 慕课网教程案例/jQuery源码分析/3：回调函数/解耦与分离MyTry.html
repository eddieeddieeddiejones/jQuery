<!DOCTYPE HTML>
<html>

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <script src="http://img.mukewang.com/down/540812440001e40e00000000.js" type="text/javascript"></script>
    <script src="http://img.mukewang.com/down/541f6ff70001a0a500000000.js" type="text/javascript"></script>
    <title></title>
</head>

<body>
    <script type="text/javascript">
    var Observable = {
        callbacks: [],
        add: function(fn) {
            this.callbacks.push(fn)
        },
        fire: function(data) {
            this.callbacks.forEach(function(item) {
                item(data)
            })
        }
    }

    function show(msg) {
        $("body").append('<li>' + msg + '</li>')
    }

    function ajax(obj){
      setTimeout(obj.successful(obj.data),1000)
    }

    //使用add开始订阅：
    Observable.add(function(data) {
        show('执行动作一 ' + data)
    })
    Observable.add(function(data) {
        show('执行动作二')
    })


    //一段ajax请求，成功后处理
    ajax({
        data: '请求数据',
        successful: function(data) {
            Observable.fire(data); //触发动作
        }
    })
    </script>
</body>

</html>
