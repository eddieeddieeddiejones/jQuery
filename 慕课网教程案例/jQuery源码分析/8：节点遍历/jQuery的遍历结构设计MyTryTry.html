<!DOCTYPE HTML>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<script src="http://img.mukewang.com/down/540812440001e40e00000000.js" type="text/javascript"></script>
<title></title>
</head>
<body>

<button id="test1">jQuery遍历祖先</button>
<button id="test2">模拟遍历祖先</button>

<ul class="level-1">
  <li class="item-i">I</li>
  <li class="item-ii">II
    <ul class="level-2">
      <li class="item-a">A</li>
      <li class="item-b">B
        <ul class="level-3">
          <li class="item-1">1</li>
          <li class="item-2">2</li>
          <li class="item-3">3</li>
        </ul>
      </li>
      <li class="item-c">C</li>
    </ul>
  </li>
  <li class="item-iii">III</li>
</ul>


<script type="text/javascript">


  function dir(elem,filter){
    var truncation = filter !== undefined
    var matches =[]
    while((elem= elem.parentNode) && elem.nodeType !== 9 ){
      if(truncation){
        if(elem.nodeName.toLowerCase() === filter){
          break
        }
      }
      matches.push(elem)
    }
    return matches
  }
  var ajQuery = {}
  $.each({
    parent: function (elem){
      var parent = elem.parentNode
      return parent && parent.nodeType !== 11 ? parent: null
    },
    parents: function(elem){
      return dir(elem)
    },
    parentsUntil: function(elem,until){
      return dir(elem,until)
    }

  },function(name,fn){
    ajQuery[name] = function(elem,selector){
      return fn(elem,selector)
    }
  })





  $("#test1").click(function() {
    var item = $('.item-1')
    console.log(item.parent()[0])
    console.log(item.parents().length)
    console.log(item.parentsUntil('body').length)
  })

  $("#test2").click(function() {
    var item = document.querySelectorAll('.item-1')[0]
    console.log(ajQuery.parent(item))
    console.log(ajQuery.parents(item))
    console.log(ajQuery.parentsUntil(item, 'body'))
  })


</script> 

</body>
</html>









