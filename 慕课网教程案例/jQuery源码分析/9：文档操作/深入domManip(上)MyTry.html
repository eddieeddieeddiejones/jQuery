<!doctype html>
<html>
<head>
	<meta http-equiv="Content-type" content="text/html; charset=utf-8"/>
	<!--  <script src="http://img.mukewang.com/down/540812440001e40e00000000.js" type="text/javascript"></script> -->
	<script type="text/javascript" src="../jquery-2.1.1.js"></script>
	<title>domManip</title>
</head>
<body>

<button>模拟append</button>

<div id="test"></div>

<script type="text/javascript">
	// createDocumentFragment 特性
	// var ul = document.createElement("ul"); 
	// var docfrag = document.createDocumentFragment();
	// var browserList = ["Internet Explorer", "Firefox", "Safari",
	//     "Chrome", "Opera"];

	// browserList.forEach(function(e) {
	//   var li = document.createElement("li");
	//   li.textContent = e;
	//   docfrag.appendChild(li);
	// });
	// ul.appendChild(docfrag);
	// console.log(ul)


	//elems = ["<div>通过append加入慕课网</div>"], context = document
	function buildFragment(elems,context){
		var fragment = context.createDocumentFragment(),
		    i =0,
		    len = elems.length,
		    elem
		// 为什么要写成数组的形式？？？？？？？？？？？？？？？？？？？？？？？？？
		for(;i < len;i++){
			elem = elems[i]
			var tmp = fragment.appendChild(context.createElement("div"))
			tem.innerHTML = elem
		}
		return fragment
	}



	//parentEles = [div#test], target = "<div>通过append加入慕课网</div>", callback = (elem)
	function domManip(parentEles,target,callback){
		var l = parentEles.length
		// 为什么要写这句话？？？？？？？？？？？？？？？？？？？？？？？？？
		var iNoClone = l - 1;
		if(l){
			var fragment = bulidFragment([target],parentEles[0].ownerDocument)
			first = fragment.firstChild
			if(fragment.childNodes.length === 1){
				fragment = first
			}
			if(first){
				callback.call(parentEles,first)
			}
		}
	}

	function append(parentEles,target){
		// 为什么写成数组的形式？？？？？？？？？？？？？？？？？？？？？？？？？？？？
		return domManip([parentEles],target,function(elem){
			parentEles.appendChild(elem)
		})
	}
	$("button").click(function(){
		append(document.getElementById("test"),'<div>通过append加入慕课网</div>')
	})
</script>
</body>
</html>